<div class="inventories-list container py-3">
	<div class="d-flex justify-content-between align-items-center mb-3">
		<h3>Inventories</h3>
		<div class="d-flex gap-2 align-items-center">
			<input class="form-control" placeholder="Search inventories..." [value]="searchTerm"
				(input)="search$.next($any($event.target).value)" style="min-width:260px" />
			<!-- page size selector -->
			<select class="form-select" style="width:120px;" [(ngModel)]="pageSize" (change)="page=1; load()">
				<option [value]="10">10</option>
				<option [value]="20">20</option>
				<option [value]="50">50</option>
			</select>
		</div>
	</div>


	<div *ngIf="loading" class="text-center py-4">Loading…</div>


	<table class="table table-hover" *ngIf="!loading">
		<thead class="table-light">
			<tr>
				<th (click)="setSort('title')" style="cursor:pointer">Title <small
						*ngIf="sortBy==='title'">({{sortDir}})</small></th>
				<th>Description</th>
				<th>Tags</th>
				<th>Creator</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let inv of inventories">
				<td>
					<a [routerLink]="['/inventory', inv.id]">{{inv.name}}</a>
				</td>
				<td [attr.title]="inv.description">{{ short(inv.description) }}</td>
				<td>
					<ng-container *ngIf="inv.tags?.length; else noTags">
						<span *ngFor="let t of inv.tags" class="badge bg-secondary me-1">{{t}}</span>
					</ng-container>
					<ng-template #noTags>—</ng-template>
				</td>
				<td>
					<a [routerLink]="['/users', inv.ownerId]">{{inv.ownerName || '—'}}</a>
				</td>
			</tr>
		</tbody>
	</table>


	<nav *ngIf="total > pageSize" aria-label="Page navigation">
		<ul class="pagination justify-content-center">
			<li class="page-item" [class.disabled]="page<=1">
				<a class="page-link" (click)="onPageChange(page-1)">&laquo;</a>
			</li>
			<li class="page-item" *ngFor="let p of [].constructor(getCeil(total/pageSize)); let i = index"
				[class.active]="page===i+1">
				<a class="page-link" (click)="onPageChange(i+1)">{{i+1}}</a>
			</li>
			<li class="page-item" [class.disabled]="page>=getCeil(total/pageSize)">
				<a class="page-link" (click)="onPageChange(page+1)">&raquo;</a>
			</li>
		</ul>
	</nav>
</div>